$.fn.exists=function(){return this.length!==0};function isFunction(a){var b={};return a&&b.toString.call(a)==="[object Function]"}function isObject(a){return a!==null&&typeof a==="object"}Number.prototype.formatMoney=function(k,g,e){var h=this,k=isNaN(k=Math.abs(k))?2:k,g=g==undefined?".":g,e=e==undefined?",":e,f=h<0?"-":"",b=parseInt(h=Math.abs(+h||0).toFixed(k))+"",a=(a=b.length)>3?a%3:0;return f+(a?b.substr(0,a)+e:"")+b.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+e)+(k?g+Math.abs(h-b).toFixed(k).slice(2):"")};var Util={};Util.toMoney=function(a){return a.formatMoney(2,",",".")};Util.toFloat=function(b){var a=parseFloat(b.replace(/[,]/,"."),10);return isNaN(a)?0:a};Util.checkVal=function(a){if(a.is(":checked")){return a.val()}return"N"};function makeurl(a,b){if(a.indexOf("?")<0){return a+"?"+$.param(b)}return a+"&"+$.param(b)}function toggleFullScreen(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen()}else{if(document.documentElement.msRequestFullscreen){document.documentElement.msRequestFullscreen()}else{if(document.documentElement.mozRequestFullScreen){document.documentElement.mozRequestFullScreen()}else{if(document.documentElement.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}}}function ajaxLink(a){var b=$("a.ajaxlink");b.click(function(){var c=$(this).attr("ask");if(c&&!confirm(c)){return false}if(a!=undefined){$(this).trigger(a,[$(this).attr("href")]);return false}return true});return b}var Upload={};Upload.image={};Upload.image.initialize=function(a){function b(f,d){if(f.files&&f.files[0]){var c=new FileReader();var e=$(f).closest(d).find("img");c.onload=function(g){e.attr("src",g.target.result);e.css("display","inline")};c.readAsDataURL(f.files[0])}}$(a+" > input[type=file]").each(function(){$(this).change(function(){b(this,a)})});$(a+" > .mask").each(function(){var c=$(this).closest(a).find("img");$(this).css("border-width",(c.height()/2)+"px 0px")});$(a+" > .mask > a").each(function(){var c=$(this).closest(a).find("img");if(c.width()<50){$(this).css("background-size","16px 16px");$(this).css("width","16px");$(this).css("height","16px");$(this).css("top","-8px")}});$(a+" .img-open").click(function(c){c.preventDefault();input=$(this).parent().parent().find("input[type=file]");input.trigger("click")});$(a+" .img-remove").click(function(g){g.preventDefault();var c=$(this).parent().parent().find("input[type=file]");c.replaceWith(c=c.clone(true));var f=c.parent().find("img");var d=f.attr("tag");if(d==undefined||d.length==0){d="image"}f.attr("src",f.attr("no-picture"));f.css("display","inline");c.parent().find("input[type=hidden]").val("");c.val("")})};Upload.form=function(a,b){function c(d){if(d.status!="ok"){$(".thunder-container").message("error",d.msg);if(d.hasOwnProperty("field")){$("#"+d.field).focus()}return}$(".thunder-container").message("success",d.msg,{autoClose:{enable:true}});$("html, body").animate({scrollTop:0},"slow");if(b!=undefined){$(a).trigger(b,[d])}}$(a).submit(function(){var d=$(this).attr("enctype");if(typeof d==typeof undefined||d==false){$.post(makeurl($(this).attr("action"),{saida:"json"}),$(this).serialize(),c);return false}var e=new FormData(this);$.ajax({url:makeurl($(this).attr("action"),{saida:"json"}),type:"POST",data:e,cache:false,contentType:false,processData:false,success:c});return false})};var Cliente={};Cliente.conta={};Cliente.conta.initForm=function(a){$("#cliente-form #fone1").mask("(99) 9999-9999?9");if(a!=undefined){$("#"+a).focus()}};Gerenciar={};Gerenciar.common={};Gerenciar.common.load=function(a,f,e,d,c,b){$.get(a,f,function(l){if(l.status!="ok"){$(".thunder-container").message("error",l.msg);return}$(e).empty();var g=[];if(c==undefined||c==null){g=l.items}else{g=c(l)}for(var h=0;h<g.length;h++){var k=g[h];var j=$("<option></option>");var m=d(k);j.val(m.value);j.text(m.title);if(b!=undefined){b(j,k)}$(e).append(j)}})};Gerenciar.common.autocomplete=function(a,h,d,e,i,f,j,g,b){if(b==undefined){b="data-content"}if(g==undefined){g=h+"id"}function c(){$(h).val("");$(g).val("");$(g).removeAttr(b);var k=$(h).closest("div").find("label .identifier");k.text("")}$(h).autocomplete({lookup:function(l,k){var m={busca:l};if(f!=undefined){m=f(l)}$.get(a,m,function(p){var n={suggestions:[]};if(p.status=="ok"){var o=[];if(j==undefined){o=p.items}else{o=j(p)}n={suggestions:$.map(o,function(q){return{value:e(q).value,data:q}})}}k(n)})},onSelect:function(k){var m=e(k.data);$(g).val(k.data.id);$(g).attr(b,m.value);var l=$(h).closest("div").find("label .identifier");l.text(m.title);if(d!=undefined&&d!=null){d(k.data)}},formatResult:function(m,o){var k=$.Autocomplete.formatResult(m,o);if(i==undefined){return k}var l=null;var n="";if(isFunction(i)){l=i(m.data);if(isObject(l)){n=l.style;l=l.url;if(n!=""){n=' class="'+n+'"'}}}else{l=m.data.imagemurl;if(l==null){l=i}}return'<div><img src="'+l+'"'+n+"/><p>"+k+"</p><p>"+e(m.data).title+"</p></div>"}});$(h).blur(function(){if($(h).val()==$(g).attr(b)){return}c()});$(h).bind("input",function(){if($(h).val()!=""){return}c()})};Gerenciar.diversos={};Gerenciar.diversos.init=function(v,g,q,h){var j=["#96CA59","#3F97EB","#72c380","#6f7a8a","#f7cb38","#5a8022","#2c7282"];var s;var a;if(v.length>0){s=v[0][0];a=v[v.length-1][0]}var l=[1,"day"];var e="%d/%m/%y";var b={grid:{show:true,aboveData:true,color:"#3f3f3f",labelMargin:10,axisMargin:0,borderWidth:0,borderColor:null,minBorderMargin:5,clickable:true,hoverable:true,autoHighlight:true,mouseActiveRadius:100},series:{lines:{show:true,fill:true,lineWidth:2,steps:false},points:{show:true,radius:4.5,symbol:"circle",lineWidth:3}},colors:j,shadowSize:0,tooltip:true,tooltipOpts:{content:"%s: %y.0",xDateFormat:"%d/%m",shifts:{x:-30,y:-50},defaultTheme:false},yaxis:{tickDecimals:2,tickFormatter:function(x,w){return"R$ "+x.toFixed(2).replace(/\./g,",").replace(/\B(?=(?:\d{3})+(?!\d))/g,".")},min:0},xaxis:{mode:"time",minTickSize:l,timeformat:e,min:s,max:a}};var r=$.plot($("#placeholder33x"),[{data:v,lines:{fillColor:"rgba(150, 202, 89, 0.12)"},points:{fillColor:"#fff"}}],b);var p=null,f=null;$.fn.UseTooltip=function(){$(this).bind("plothover",function(B,F,A){if(A){if((f!=A.series.label)||(p!=A.dataIndex)){p=A.dataIndex;f=A.series.label;$("#tooltip").remove();var C=A.datapoint[0];var D=A.datapoint[1];var w=moment.unix(C).format("DD/MM/YYYY");var E="R$ "+D.toFixed(2).replace(/\./g,",").replace(/\B(?=(?:\d{3})+(?!\d))/g,".");var z=A.series.color;c(A.pageX,A.pageY,z,"<strong>"+E+"</strong><br/>"+w)}}else{$("#tooltip").remove();p=null}})};function c(w,B,z,A){$('<div id="tooltip">'+A+"</div>").css({position:"absolute",display:"none",top:B-40,left:w-10,border:"2px solid "+z,padding:"3px","font-size":"9px","border-radius":"5px","background-color":"#fff","font-family":"Verdana, Arial, Helvetica, Tahoma, sans-serif",opacity:0.9}).appendTo("body").fadeIn(200)}$("#placeholder33x").UseTooltip();var t=moment.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return(this.day()===0||this.day()===6)?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"});var m=function(y,w,x){$("#reportrange span").html(y.format("MMMM D, YYYY")+" - "+w.format("MMMM D, YYYY"))};var k={startDate:moment().subtract(1,"month").startOf("month"),endDate:moment().endOf("month"),dateLimit:7776000000,showDropdowns:true,timePicker12Hour:true,ranges:{Hoje:[moment(),moment()],Ontem:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 Dias":[moment().subtract(6,"days"),moment()],"Últimos 30 Dias":[moment().subtract(29,"days"),moment()],"Esse Mês":[moment().startOf("month"),moment().endOf("month")],"Último Mês":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},opens:"left",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary",cancelClass:"btn-small",locale:{separator:" para ",format:"DD/MM/YYYY",applyLabel:"Aplicar",cancelLabel:"Limpar",fromLabel:"De",toLabel:"Para",customRangeLabel:"Intervalo",firstDay:1}};m(k.startDate,k.endDate);$("#reportrange").daterangepicker(k,m);$("#reportrange").on("apply.daterangepicker",function(x,w){$.get("/gerenciar/diversos/relatorio",{action:"faturamento",start:w.startDate.format("YYYY-MM-DD"),end:w.endDate.format("YYYY-MM-DD")},function(z){if(z.status!="ok"){alert(z.msg);return}v=[];for(var y in z.faturamento){v.push([z.faturamento[y].data,z.faturamento[y].total])}if(v.length>0){s=v[0][0];a=v[v.length-1][0]}b.xaxis.min=s;b.xaxis.max=a;r=$.plot($("#placeholder33x"),[{data:v,lines:{fillColor:"rgba(150, 202, 89, 0.12)"},points:{fillColor:"#fff"}}],b)})});var o={responsive:false,animation:{animateScale:true,animateRotate:true},title:{display:false},tooltips:{callbacks:{label:function(w,y){var z=y.datasets[w.datasetIndex].data;var x=z[w.index];return x+"%"}}},percentageInnerCutout:50};var d=new Chart($("#canvas1")[0].getContext("2d"),{type:"doughnut",data:g,options:o});var i={lines:12,angle:0,lineWidth:0.4,pointer:{length:0.75,strokeWidth:0.042,color:"#1D212A"},limitMax:"true",colorStart:"#1ABC9C",colorStop:"#1ABC9C",strokeColor:"#F0F3F3",generateGradient:true};var u=document.getElementById("foo");var n=new Gauge(u).setOptions(i);n.maxValue=h;n.animationSpeed=32;n.set(q);n.setTextField(document.getElementById("gauge-text"));$(".quick-list a").click(function(){var w=$(this);$.get("/gerenciar/diversos/relatorio",{action:"meta",intervalo:w.attr("range")},function(x){if(x.status!="ok"){alert(x.msg);return}$("#meta-name").text(w.text());$("#gauge-text").text(Util.toMoney(x.atual));$("#goal-text").text("R$"+Util.toMoney(x.base));q=Math.round(x.atual);h=Math.max(Math.round(x.base),q);n.maxValue=h;n.set(q)})})};Gerenciar.mesa={};Gerenciar.mesa.init=function(){$("#query").focus();$("#ativa").change(function(){$(this).closest("form").submit()});ajaxLink("mesa-delete").on("mesa-delete",function(b,a){var c=$(this).closest("tr");$.get(makeurl(a,{saida:"json"}),function(d){if(d.status!="ok"){$(".thunder-container").message("error",d.msg);return}$(".thunder-container").message("success",d.msg,{autoClose:{enable:true}});c.remove()})})};Gerenciar.mesa.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.sessao={};Gerenciar.sessao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.sessao.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.caixa={};Gerenciar.caixa.init=function(){ajaxLink();$("#query").focus();$("#estado").change(function(){$(this).closest("form").submit()})};Gerenciar.caixa.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.banco={};Gerenciar.banco.init=function(){ajaxLink();$("#query").focus()};Gerenciar.banco.initField=function(a,b){Gerenciar.common.autocomplete("/gerenciar/banco/",a,b,function(c){return{value:c.razaosocial,title:c.numero}},undefined,function(c){return{query:c,saida:"json",limite:5}})};Gerenciar.banco.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.carteira={};Gerenciar.carteira.init=function(){ajaxLink();$("#query").focus();$("#tipo").change(function(){$(this).closest("form").submit()});Gerenciar.banco.initField("#banco")};Gerenciar.carteira.initForm=function(c){function a(){$("#conta").unmask();$("#agencia").unmask();$("#conta").mask($("#bancoid").data().agenciamascara.replace(/>a/,"*"));$("#agencia").mask($("#bancoid").data().contamascara.replace(/>a/,"*"))}function b(e){if(e=="Financeira"){$("#banco").closest(".form-group").addClass("hidden");var d=$("#conta").closest(".form-group").find("label");d.text(d.attr("data-servico"));d=$("#agencia").closest(".form-group").find("label");d.text(d.attr("data-conta"));$("#conta").unmask();$("#agencia").unmask()}else{$("#banco").closest(".form-group").removeClass("hidden");var d=$("#conta").closest(".form-group").find("label");d.text(d.attr("data-conta"));d=$("#agencia").closest(".form-group").find("label");d.text(d.attr("data-agencia"));a()}}if(c!=undefined){$("#"+c).focus()}Gerenciar.banco.initField("#banco",function(d){$("#bancoid").data("agenciamascara",d.agenciamascara);$("#bancoid").data("contamascara",d.contamascara);a()});$("#tipo").change(function(){b($(this).find(":selected").val())});b($("#tipo").find(":selected").val())};Gerenciar.forma_pagto={};Gerenciar.forma_pagto.init=function(){ajaxLink();$("#query").focus();$("#tipo, #estado").change(function(){$(this).closest("form").submit()})};Gerenciar.forma_pagto.initForm=function(b){function a(c){if(c=="Cartao"||c=="Cheque"){$("#minparcelas").closest(".form-group").removeClass("hidden");$("#maxparcelas").closest(".form-group").removeClass("hidden");$("#parcelassemjuros").closest(".form-group").removeClass("hidden");$("#juros").closest(".form-group").removeClass("hidden")}else{$("#minparcelas").closest(".form-group").addClass("hidden");$("#maxparcelas").closest(".form-group").addClass("hidden");$("#parcelassemjuros").closest(".form-group").addClass("hidden");$("#juros").closest(".form-group").addClass("hidden")}}$("#minparcelas").autoNumeric("init");$("#maxparcelas").autoNumeric("init");$("#parcelassemjuros").autoNumeric("init");$("#juros").autoNumeric("init");if(b!=undefined){$("#"+b).focus()}$("#tipo").change(function(){a($(this).find(":selected").val())});a($("#tipo").find(":selected").val())};Gerenciar.cartao={};Gerenciar.cartao.init=function(){ajaxLink();$("#query").focus();$("#estado").change(function(){$(this).closest("form").submit()})};Gerenciar.cartao.initForm=function(a){$("#mensalidade").autoNumeric("init");$("#transacao").autoNumeric("init");$("#taxa").autoNumeric("init");$("#diasrepasse").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}$("#imageindex").ddslick({imageSrc:$("#imageindex").attr("data-imagesrc"),width:"100%",height:260,imgWidth:50,imgHeight:31,onSelected:function(b){$("#imageindex").css("margin-top",parseInt($("#descricao").closest(".form-group").css("height"))-parseInt($("#imageindex").css("height")))}})};Gerenciar.funcao={};Gerenciar.funcao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.funcao.initForm=function(a){$("#salariobase").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.cliente={};Gerenciar.cliente.init=function(){ajaxLink();$("#query").focus();$("#tipo").change(function(){$(this).closest("form").submit()})};Gerenciar.cliente.initField=function(a,c,b){Gerenciar.common.autocomplete("/app/cliente/procurar",a,undefined,function(d){return{value:$.trim(d.nome+(d.tipo!="Fisica"||d.sobrenome==null?"":" "+d.sobrenome)),title:d.fone1}},function(e){var d=e.imagemurl;if(d!=null){if(e.tipo=="Fisica"){return{url:d,style:"fisica"}}return d}if(e.tipo=="Fisica"){return{url:"/static/img/cliente.png",style:"fisica"}}return"/static/img/empresa.png"},function(d){return{busca:d,tipo:b,limite:5,formatar:1}},function(d){return d.clientes},c,"data-nome")};Gerenciar.cliente.initForm=function(b){function a(c){if(c=="Fisica"){$("#imagem_container").prev("label").text($("#imagem_container").attr("data-foto"));$("#nome").prev("label").text($("#nome").attr("data-nome"));$("#sobrenome").prev("label").text($("#sobrenome").attr("data-sobrenome"));$("#cpf").prev("label").text($("#cpf").attr("data-cpf"));$("#cpf").mask($("#cpf").attr("mask"));$("#rg").prev("label").text($("#rg").attr("data-rg"));$("#dataaniversario").prev("label").text($("#dataaniversario").attr("data-niver"));$("#slogan").prev("label").text($("#slogan").attr("data-obs"));$("#im").closest(".form-group").addClass("hidden");$("#genero").closest(".form-group").removeClass("hidden")}else{$("#imagem_container").prev("label").text($("#imagem_container").attr("data-logomarca"));$("#nome").prev("label").text($("#nome").attr("data-fantasia"));$("#sobrenome").prev("label").text($("#sobrenome").attr("data-razaosocial"));$("#cpf").prev("label").text($("#cpf").attr("data-cnpj"));$("#cpf").mask($("#cpf").attr("mask-cnpj"));$("#rg").prev("label").text($("#rg").attr("data-ie"));$("#dataaniversario").prev("label").text($("#dataaniversario").attr("data-fund"));$("#slogan").prev("label").text($("#slogan").attr("data-slogan"));$("#im").closest(".form-group").removeClass("hidden");$("#genero").closest(".form-group").addClass("hidden")}}$("#tipo").change(function(){a($(this).find(":selected").val())});$.datetimepicker.setLocale("pt-BR");$("#dataaniversario").datetimepicker({timepicker:false,format:"d/m/Y",enterLikeTab:false});$("#fone1").each(function(){$(this).mask($(this).attr("mask"))});$("#fone2").each(function(){$(this).mask($(this).attr("mask"))});$("#limitecompra").autoNumeric("init");Upload.image.initialize("#imagem_container");if(b!=undefined){$("#"+b).focus()}a($("#tipo").find(":selected").val());Upload.form("#cliente-form","clientesave")};Gerenciar.funcionario={};Gerenciar.funcionario.init=function(){ajaxLink();$("#query").focus();$("#funcao, #genero, #estado").change(function(){$(this).closest("form").submit()})};Gerenciar.funcionario.initField=function(a,b){Gerenciar.common.autocomplete("/app/funcionario/",a,undefined,function(c){return{value:c.nome,title:c.funcao}},function(d){var c=d.imagemurl;if(c==null){c="/static/img/cliente.png"}return{url:c,style:"fisica"}},function(c){return{busca:c,ativo:b,limite:5,format:1}})};Gerenciar.funcionario.initForm=function(a){$("#codigobarras").autoNumeric("init");$("#pontuacao").autoNumeric("init");$("#porcentagem").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}Gerenciar.cliente.initField("#cliente","#clienteid","fisica")};Gerenciar.moeda={};Gerenciar.moeda.init=function(){ajaxLink();$("#query").focus()};Gerenciar.moeda.initForm=function(a){$("#divisao").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.pais={};Gerenciar.pais.init=function(){ajaxLink();$("#query").focus();$("#moedaid").change(function(){$(this).closest("form").submit()})};Gerenciar.pais.initForm=function(a){$("#bandeiraindex").change(function(){Gerenciar.pais.setBandeira($(this))});Gerenciar.pais.setBandeira($("#bandeiraindex"));$("#linguagemid").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.pais.setBandeira=function(c){var a=c.find(":selected");var b=a.attr("data-bandeira");var d=c.prev("label").find(".cell-icon");d.css("background-position",-(b*16)+"px 0px")};Gerenciar.estado={};Gerenciar.estado.init=function(){ajaxLink();$("#query").focus();$("#paisid").change(function(){Gerenciar.pais.setBandeira($(this));$(this).closest("form").submit()});Gerenciar.pais.setBandeira($("#paisid"))};Gerenciar.estado.initForm=function(a){$("#paisid").change(function(){Gerenciar.pais.setBandeira($(this))});Gerenciar.pais.setBandeira($("#paisid"));if(a!=undefined){$("#"+a).focus()}};Gerenciar.estado.load=function(a){Gerenciar.common.load("/app/estado/",{paisid:a,saida:"json"},"#estadoid",function(b){return{value:b.id,title:b.nome}},null,function(b,c){var d=$("#estadoid").attr("data-select-after");b.attr("data-sigla",c.uf);if(d!=null&&removeDiacritics(c.nome)==removeDiacritics(d)){b.prop("selected",true);$("#estadoid").removeAttr("data-select-after")}})};Gerenciar.cidade={};Gerenciar.cidade.init=function(){ajaxLink();$("#query").focus();$("#paisid").change(function(){Gerenciar.pais.setBandeira($(this));$(this).closest("form").submit()});Gerenciar.pais.setBandeira($("#paisid"));$("#estadoid").change(function(){$(this).closest("form").submit()})};Gerenciar.cidade.initForm=function(a){$("#cep").each(function(){$(this).mask($(this).attr("mask"))});if(a!=undefined){$("#"+a).focus()}$("#paisid").change(function(){Gerenciar.estado.load($(this).find(":selected").val())})};Gerenciar.cidade.autocomplete=function(b,c,a){$(b).autocomplete({lookup:function(f,d){var e=$(c).val();if(a){e=$(c).find(":selected").attr("data-id")}$.get("/app/cidade/",{nome:f,estadoid:e},function(h){var g={suggestions:[]};if(h.status=="ok"){g={suggestions:$.map(h.items,function(i){return{value:i.nome,data:i}})}}d(g)})},onSelect:function(d){$(b).trigger("cidadechoose",[d.data])}});return $(b)};Gerenciar.cidade.fill=function(d,a,b,c){$("#cidade").val(d);$("#cidadeid").val(a)};Gerenciar.bairro={};Gerenciar.bairro.init=function(){ajaxLink();$("#query").focus();$("#paisid").change(function(){Gerenciar.pais.setBandeira($(this));$(this).closest("form").submit()});Gerenciar.pais.setBandeira($("#paisid"));$("#estadoid").change(function(){$(this).closest("form").submit()});Gerenciar.cidade.autocomplete("#cidade","#estadoid",true)};Gerenciar.bairro.initForm=function(a){$("#valorentrega").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}$("#paisid").change(function(){Gerenciar.pais.setBandeira($(this));Gerenciar.cidade.fill("","","","");Gerenciar.estado.load($(this).val())});Gerenciar.pais.setBandeira($("#paisid"));$("#estadoid").change(function(){Gerenciar.cidade.fill("","","","")});Gerenciar.cidade.autocomplete("#cidadeid","#estadoid",false).on("cidadechoose",function(b,c){Gerenciar.cidade.fill(c.id,c.nome,"","")})};Gerenciar.localizacao={};Gerenciar.localizacao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.localizacao.initMap=function(){var d=[];function e(n,l,j){for(var m=0;m<d.length;++m){d[m].setMap(null)}d.length=0;var k=new google.maps.Marker({position:l,map:n,icon:"/static/img/house.png",draggable:true});google.maps.event.addListener(k,"dragend",function(o){$("#latitude").val(o.latLng.lat());$("#latitude").val(o.latLng.lng());h(n,o.latLng)});d.push(k);$("#latitude").val(l.lat);$("#longitude").val(l.lng);if(j){n.setCenter(l);n.setZoom(16)}}function f(o,k,q,p,n,l,j){if(o!=undefined){$("#paisid option").each(function(){if((o.length==2&&$(this).attr("data-codigo")==o)||(o.length==3&&$(this).attr("data-sigla")==o)||(removeDiacritics($(this).text())==removeDiacritics(o))){if(q!=undefined){$("#estadoid").attr("data-select-after",q)}$("#paisid").val($(this).val()).trigger("change")}})}if(k!=undefined){$("#cep").val(k)}if(q!=undefined){$("#estadoid option").each(function(){if(removeDiacritics($(this).text())==removeDiacritics(q)){$("#estadoid").val($(this).val())}})}if(p!=undefined){$("#cidade").val(p)}if(n!=undefined){$("#bairro").val(n)}if(l!=undefined){$("#logradouro").val(l)}var m=$("#numero").val();if(j!=undefined&&m==""){$("#numero").val(j)}}function b(m,l,j,k,o,n){var p={lat:l,lng:j};e(m,p,true);f(k,undefined,o,n)}function c(j){$.get("http://ipinfo.io/json",function(k){var l=k.loc.split(",");b(j,Util.toFloat(l[0]),Util.toFloat(l[1]),k.country,k.region,k.city)})}function h(k,j){$.get("http://maps.googleapis.com/maps/api/geocode/json",{latlng:j.lat()+","+j.lng(),sensor:"true"},function(p){if(p.results.length==0){return}var v=p.results[0];var n,q,m,l,r,u,s;for(var o=0;o<v.address_components.length;o++){var t=v.address_components[o];switch(t.types[0]){case"street_number":s=t.long_name;break;case"route":u=t.long_name;break;case"political":r=t.long_name;break;case"locality":l=t.long_name;break;case"administrative_area_level_1":m=t.long_name;break;case"postal_code":if(t.types.length==1){q=t.long_name}break;case"country":n=t.short_name;break}}f(n,q,m,l,r,u,s)})}var g;var i=16;if($("#latitude").val()==""||$("#longitude").val()==""){g={lat:-15.628327,lng:-47.598267};i=4}else{g={lat:Util.toFloat($("#latitude").val()),lng:Util.toFloat($("#longitude").val())}}var a=new google.maps.Map($("#google-map")[0],{center:g,zoom:i});google.maps.event.addListener(a,"click",function(j){var k={lat:j.latLng.lat(),lng:j.latLng.lng()};e(a,k,false);h(a,j.latLng)});if(i==16){e(a,g,true);return}if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(j){b(a,j.coords.latitude,j.coords.longitude)},function(){c(a)})}else{c(a)}};Gerenciar.localizacao.initForm=function(b){function a(c){if(c=="Casa"){$("#condominio").closest(".form-group").addClass("hidden");$("#bloco").closest(".form-group").addClass("hidden");$("#apartamento").closest(".form-group").addClass("hidden")}else{$("#condominio").closest(".form-group").removeClass("hidden");$("#bloco").closest(".form-group").removeClass("hidden");$("#apartamento").closest(".form-group").removeClass("hidden")}}$("#cep").each(function(){$(this).mask($(this).attr("mask"))});$("#bandeiraindex").change(function(){Gerenciar.pais.setBandeira($(this))});Gerenciar.pais.setBandeira($("#bandeiraindex"));$("#tipo-loc").change(function(){a($(this).find(":selected").val())});a($("#tipo-loc").find(":selected").val());if(b!=undefined){$("#"+b).focus()}$("#paisid").change(function(){Gerenciar.estado.load($(this).find(":selected").val())});Gerenciar.cidade.autocomplete("#cidade","#estadoid",false);$("#bairro").autocomplete({lookup:function(d,c){$.get("/app/bairro/",{nome:d,estadoid:$("#estadoid").val(),cidade:$("#cidade").val()},function(f){var e={suggestions:[]};if(f.status=="ok"){e={suggestions:$.map(f.items,function(g){return{value:g.nome,data:g}})}}c(e)})}});$("#logradouro").autocomplete({lookup:function(d,c){$.get("/app/localizacao/",{tipo:"logradouro",logradouro:d,estadoid:$("#estadoid").val(),cidade:$("#cidade").val()},function(f){var e={suggestions:[]};if(f.status=="ok"){e={suggestions:$.map(f.items,function(g){return{value:g.logradouro,data:g}})}}c(e)})},onSelect:function(c){if(c.data.cep!=null&&c.data.cep.length>0){$("#cep").val(c.data.cep)}$("#bairro").val(c.data.bairro);$("#logradouro").val(c.data.logradouro)}});$("#condominio").autocomplete({lookup:function(d,c){$.get("/app/localizacao/",{tipo:"condominio",condominio:d,estadoid:$("#estadoid").val(),cidade:$("#cidade").val()},function(f){var e={suggestions:[]};if(f.status=="ok"){e={suggestions:$.map(f.items,function(g){return{value:g.condominio,data:g}})}}c(e)})},onSelect:function(c){if(c.data.cep!=null&&c.data.cep.length>0){$("#cep").val(c.data.cep)}$("#bairro").val(c.data.bairro);$("#logradouro").val(c.data.logradouro);$("#numero").val(c.data.numero)}});Upload.form("#localizacao-form")};Gerenciar.comanda={};Gerenciar.comanda.init=function(){ajaxLink();$("#query").focus();$("#ativa").change(function(){$(this).closest("form").submit()})};Gerenciar.comanda.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.movimentacao={};Gerenciar.movimentacao.init=function(){ajaxLink();$("#query").focus();$("#aberto, #caixaid").change(function(){$(this).closest("form").submit()});Gerenciar.funcionario.initField("#inicializador","");$("#aberto").focus()};Gerenciar.movimentacao.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.pedido={};Gerenciar.pedido.init=function(){ajaxLink();$("#query").focus();$("#estado, #tipo").change(function(){$(this).closest("form").submit()});Gerenciar.cliente.initField("#cliente","#clienteid");Gerenciar.funcionario.initField("#funcionario","");$.datetimepicker.setLocale("pt-BR");$("#inicio, #fim").datetimepicker({timepicker:false,format:"d/m/Y",enterLikeTab:false})};Gerenciar.pedido.initForm=function(a){$("#pessoas").autoNumeric("init");$.datetimepicker.setLocale("pt-BR");$("#dataagendamento").datetimepicker({format:"d/m/Y H:i",enterLikeTab:false});if(a!=undefined){$("#"+a).focus()}};Gerenciar.categoria={};Gerenciar.categoria.init=function(){ajaxLink();$("#query").focus();$("#categoria").change(function(){$(this).closest("form").submit()})};Gerenciar.categoria.initForm=function(a){Upload.image.initialize("#imagem_container");if(a!=undefined){$("#"+a).focus()}};Gerenciar.unidade={};Gerenciar.unidade.init=function(){ajaxLink();$("#query").focus()};Gerenciar.unidade.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.setor={};Gerenciar.setor.init=function(){ajaxLink();$("#query").focus()};Gerenciar.setor.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.produto={};Gerenciar.produto.init=function(){ajaxLink();$("#query").focus();$("#tipo, #unidade, #categoria").change(function(){$(this).closest("form").submit()})};Gerenciar.produto.initField=function(a,b,c){Gerenciar.common.autocomplete("/app/produto/procurar",a,undefined,function(d){return{value:d.descricao,title:d.categoria}},"/static/img/produto.png",function(d){return{busca:d,estoque:c}},function(d){return d.produtos},b,"data-descricao")};Gerenciar.produto.initView=function(m){var n='<div class="col-md-3 col-sm-4 col-xs-6 ofertas"><div class="item"><div class="imagem border-color"><img height="128"></div><div class="anuncio"><div class="limite"><div class="alinhamento"></div></div></div><div class="detalhes"><div class="limite"><div class="preco"><div class="por"><span>R$ </span><strong></strong></div></div><button>Detalhes</button></div></div></div></div>';var g=0;var a={};var j=false;function h(q){for(var o in q.produtos){var p=$(n);if(q.produtos[o].imagemurl==undefined){$("img",p).attr("src","/static/img/produto.png")}else{$("img",p).attr("src",q.produtos[o].imagemurl)}$("img",p).attr("title",q.produtos[o].descricao);$(".alinhamento",p).text(q.produtos[o].descricao);if(q.produtos[o].tipo=="Pacote"){$(".por",p).html("")}else{$(".por strong",p).text(Util.toMoney(Util.toFloat(q.produtos[o].precovenda)))}$(".item",p).attr("data-produto",q.produtos[o].id);$(".item",p).attr("data-detalhes",q.produtos[o].detalhes);$("#product-list").append(p)}k($("#product-list .item"))}function e(p,o){if(!o){$("#product-list").empty()}if(p in a){if(!o){h(a[p])}return}if(!o){$("#product-list").append('<div class="loader">Carregando...</div>')}$.get("/app/produto/listar",{categoria:p},function(q){if(q.status!="ok"){if(!o){alert(q.msg)}return}a[p]=q;if(!j&&Object.keys(a).length==m.length){j=true}if(o){return}h(q);$("#product-list .loader").remove()}).fail(function(){if(o){return}alert("Falha na conexão com o servidor");$("#product-list .loader").remove()})}function c(o){$("#product-list").empty();$("#product-list").append('<div class="loader">Carregando...</div>');$.get("/app/produto/procurar",{busca:o,limite:8},function(p){if(p.status!="ok"){alert(p.msg);return}h(p);$("#product-list .loader").remove();$("#product-list div:first .item").addClass("selected")}).fail(function(){alert("Falha na conexão com o servidor");$("#product-list .loader").remove()})}function l(o){$("#product-info .modal-title").text($(".alinhamento",o).text());$("#product-info .description").text($(".alinhamento",o).text());$("#product-info .details").text("");$("#product-info .details").text(o.attr("data-detalhes"));$("#product-info .price span").text($(".por span",o).text());$("#product-info .price strong").text($(".por strong",o).text());$("#product-info").attr("data-produto",o.attr("data-produto"));$("#product-info .image img").attr("src",$("img",o).attr("src"));$("#product-info").modal("show");$("#product-info").on("hidden.bs.modal",function(p){$("#query").focus()})}function k(o){o.click(function(){$("#product-list .selected").removeClass("selected");$(this).addClass("selected")});$("button",o).click(function(){l($(this).closest(".item"))})}function d(o){o.click(function(){var p=$(this).closest("li");var q=$(this).attr("data-categoria");$(".categoria-list .active").removeClass("active");p.addClass("active");e(q,false);return false})}d($(".categoria-list a"));$(".categoria-nav").click(function(){var q=$(this).hasClass("next")?1:-1;var s;var o;if(q==1){o=$(".categoria-list").find("li:first");s=m[g+4]}else{o=$(".categoria-list").find("li:last");s=m[g-1]}var p=o.clone();var r=o.hasClass("active");o.remove();p.attr("title",s.descricao);p.removeClass("active");$("a",p).attr("data-categoria",s.id);$("a",p).text(s.descricao);if(q==1){$(".categoria-list").append(p)}else{$(".categoria-list").prepend(p)}d($("a",p));g+=q;if(g==0){$(".categoria-nav.prev").addClass("hide")}else{$(".categoria-nav.prev").removeClass("hide")}if(m.length-g<=4){$(".categoria-nav.next").addClass("hide")}else{$(".categoria-nav.next").removeClass("hide")}if(r){if(q==1){o=$(".categoria-list").find("li:first")}else{o=$(".categoria-list").find("li:last")}o.addClass("active");e($("a",o).attr("data-categoria"),false)}return false});$("#query").focus();var b,f=500;$("#query").bind("input",function(o){var p=$(this);clearTimeout(b);b=setTimeout(function(){if(p.val()==""){var q=$(".categoria-list").find("li:first");if(!q.exists()){return}$(".categoria-list .active").removeClass("active");q.addClass("active");e(m[g].id,false)}else{$(".categoria-list .active").removeClass("active");c(p.val())}},f)});$("#query").keydown(function(q){switch(q.which){case 38:var o=$("#product-list .selected");var p;if(o.exists()){p=o.closest(".ofertas").prev()}else{p=$("#product-list div:last")}break;case 40:var o=$("#product-list .selected");var p;if(o.exists()){p=o.closest(".ofertas").next()}else{p=$("#product-list div:first")}break;case 13:var o=$("#product-list .selected");if(o.exists()){l(o)}q.preventDefault();return;default:return}q.preventDefault();if(o.exists()&&p.exists()){o.removeClass("selected")}if(p.exists()){p=$(".item",p);p.addClass("selected");$("html, body").scrollTop(p.offset().top-p.height())}});k($("#product-list .item"));if(m.length==0){return}(function i(o){setTimeout(function(){e(m[o].id,true);if(o<m.length-1){i(o+1)}},3000)})(0)};Gerenciar.produto.initForm=function(b){function a(c){if(c=="Produto"){$("#setorestoqueid").closest(".form-group").removeClass("hidden");$("#quantidadelimite").closest(".form-group").removeClass("hidden");$("#quantidademaxima").closest(".form-group").removeClass("hidden");$("#tempopreparo").closest(".form-group").addClass("hidden");$("#perecivel").closest(".form-group").removeClass("hidden");$("#setorpreparoid").closest(".form-group").removeClass("col-sm-6");$("#setorpreparoid").closest(".form-group").addClass("col-sm-3")}else{if(c=="Composicao"){$("#setorestoqueid").closest(".form-group").addClass("hidden");$("#quantidadelimite").closest(".form-group").addClass("hidden");$("#quantidademaxima").closest(".form-group").addClass("hidden");$("#tempopreparo").closest(".form-group").removeClass("hidden");$("#perecivel").closest(".form-group").addClass("hidden");$("#setorpreparoid").closest(".form-group").removeClass("col-sm-3");$("#setorpreparoid").closest(".form-group").addClass("col-sm-6")}else{$("#setorestoqueid").closest(".form-group").addClass("hidden");$("#quantidadelimite").closest(".form-group").addClass("hidden");$("#quantidademaxima").closest(".form-group").addClass("hidden");$("#tempopreparo").closest(".form-group").addClass("hidden");$("#perecivel").closest(".form-group").addClass("hidden");$("#setorpreparoid").closest(".form-group").removeClass("col-sm-3");$("#setorpreparoid").closest(".form-group").addClass("col-sm-6")}}}$("#codigobarras").autoNumeric("init");$("#quantidadelimite").autoNumeric("init");$("#quantidademaxima").autoNumeric("init");$("#conteudo").autoNumeric("init");$("#precovenda").autoNumeric("init");$("#custoproducao").autoNumeric("init");$("#tempopreparo").autoNumeric("init");Upload.image.initialize("#imagem_container");if(b!=undefined){$("#"+b).focus()}$("#tipo").change(function(){a($(this).find(":selected").val())});a($("#tipo").find(":selected").val())};Gerenciar.produto.initDiagram=function(b){var a={container:"#diagrama-produto",connectors:{type:"step"},node:{HTMLclass:"diagrama-card"}};b.unshift(a);new Treant(b)};Gerenciar.produto.iFoodForm=function(a){$("#raw_cardapio").change(function(){var b=$(this),c=b.val().replace(/\\/g,"/").replace(/.*\//,"");var d=$(this).parents(".input-group").find(":text");if(b.length){d.val(c)}});$("#clear_cardapio").click(function(){var c=$(this).parents(".input-group").find(":text");$("#cardapio").val("");c.val("");var b=$("#raw_cardapio");b.replaceWith(b=b.clone(true))})};Gerenciar.servico={};Gerenciar.servico.init=function(){ajaxLink();$("#query").focus();$("#tipo").change(function(){$(this).closest("form").submit()})};Gerenciar.servico.initForm=function(b){function a(c){if(c=="Taxa"){$("#datainicio").closest(".form-group").addClass("hidden");$("#datafim").closest(".form-group").addClass("hidden")}else{$("#datainicio").closest(".form-group").removeClass("hidden");$("#datafim").closest(".form-group").removeClass("hidden")}}$.datetimepicker.setLocale("pt-BR");$("#datainicio").datetimepicker({format:"d/m/Y H:i",enterLikeTab:false});$("#datafim").datetimepicker({format:"d/m/Y H:i",enterLikeTab:false});$("#valor").autoNumeric("init");if(b!=undefined){$("#"+b).focus()}$("#tipo").change(function(){a($(this).find(":selected").val())});a($("#tipo").find(":selected").val())};Gerenciar.produto_pedido={};Gerenciar.produto_pedido.init=function(){ajaxLink();$("#query").focus();$("#estado, #tipo, #modulo").change(function(){$(this).closest("form").submit()});Gerenciar.funcionario.initField("#funcionario","");$.datetimepicker.setLocale("pt-BR");$("#inicio, #fim").datetimepicker({timepicker:false,format:"d/m/Y",enterLikeTab:false});Gerenciar.produto.initField("#produto","#produtoid",-1)};Gerenciar.produto_pedido.initForm=function(a){$("#preco").autoNumeric("init");$("#quantidade").autoNumeric("init");$("#porcentagem").autoNumeric("init");$("#precovenda").autoNumeric("init");$("#precocompra").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.cheque={};Gerenciar.cheque.init=function(){ajaxLink();$("#query").focus()};Gerenciar.cheque.initForm=function(a){$("#parcelas").autoNumeric("init");$("#total").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.classificacao={};Gerenciar.classificacao.init=function(){ajaxLink();$("#query").focus();$("#classificacaoid").change(function(){$(this).closest("form").submit()})};Gerenciar.classificacao.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.conta={};Gerenciar.conta.init=function(){ajaxLink();$("#query").focus();$("#classificacao").change(function(){$(this).closest("form").submit()});Gerenciar.cliente.initField("#cliente","#clienteid")};Gerenciar.conta.initForm=function(a){$("#valor").autoNumeric("init");$("#acrescimo").autoNumeric("init");$("#multa").autoNumeric("init");$("#juros").autoNumeric("init");$.datetimepicker.setLocale("pt-BR");$("#vencimento").datetimepicker({format:"d/m/Y",enterLikeTab:false});$("#dataemissao").datetimepicker({format:"d/m/Y",enterLikeTab:false});$("#datapagamento").datetimepicker({format:"d/m/Y",enterLikeTab:false});if(a!=undefined){$("#"+a).focus()}Gerenciar.cliente.initField("#cliente","#clienteid");$("#classificacaoid").change(function(){Gerenciar.common.load("/gerenciar/classificacao/",{classificacao:$("#classificacaoid").val(),saida:"json"},"#subclassificacaoid",function(b){return{value:b.id,title:b.descricao}},function(c){var b=$("<option></option>");b.val("");b.text("Não informada");$("#subclassificacaoid").append(b);return c.items})});$("#raw_anexocaminho").change(function(){var b=$(this),c=b.val().replace(/\\/g,"/").replace(/.*\//,"");var d=$(this).parents(".input-group").find(":text");if(b.length){d.val(c)}});$("#clear_anexocaminho").click(function(){var c=$(this).parents(".input-group").find(":text");$("#anexocaminho").val("");c.val("");var b=$("#raw_anexocaminho");b.replaceWith(b=b.clone(true))})};Gerenciar.credito={};Gerenciar.credito.init=function(){ajaxLink();$("#query").focus();$("#estado").change(function(){$(this).closest("form").submit()});Gerenciar.cliente.initField("#cliente","#clienteid")};Gerenciar.credito.initForm=function(a){$("#valor").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}Gerenciar.cliente.initField("#cliente","#clienteid")};Gerenciar.pagamento={};Gerenciar.pagamento.init=function(){ajaxLink();$("#query").focus();$("#formapagtoid, #cartaoid, #carteiraid, #estado").change(function(){$(this).closest("form").submit()});Gerenciar.funcionario.initField("#funcionario","");$.datetimepicker.setLocale("pt-BR");$("#inicio, #fim").datetimepicker({timepicker:false,format:"d/m/Y",enterLikeTab:false})};Gerenciar.pagamento.initForm=function(a){$("#total").autoNumeric("init");$("#parcelas").autoNumeric("init");$("#valorparcela").autoNumeric("init");$("#taxas").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.auditoria={};Gerenciar.auditoria.init=function(){ajaxLink();$("#query").focus();$("#tipo, #prioridade").change(function(){$(this).closest("form").submit()});Gerenciar.funcionario.initField("#funcionario","")};Gerenciar.auditoria.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.folha_cheque={};Gerenciar.folha_cheque.init=function(){ajaxLink();$("#cliente").focus();$("#estado").change(function(){$(this).closest("form").submit()});Gerenciar.banco.initField("#banco");Gerenciar.cliente.initField("#cliente","#clienteid")};Gerenciar.folha_cheque.initForm=function(a){$("#valor").autoNumeric("init");$("#c1").autoNumeric("init");$("#c2").autoNumeric("init");$("#c3").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.composicao={};Gerenciar.composicao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.composicao.initForm=function(a){$("#quantidade").autoNumeric("init");$("#valor").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.fornecedor={};Gerenciar.fornecedor.init=function(){ajaxLink();$("#query").focus()};Gerenciar.fornecedor.initField=function(a,b){Gerenciar.common.autocomplete("/app/fornecedor/",a,undefined,function(c){return{value:c.nome,title:c.fone1}},"/static/img/empresa.png",function(c){return{busca:c,limite:5,format:1}},undefined,b,"data-nome")};Gerenciar.fornecedor.initForm=function(a){$("#prazopagamento").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}Gerenciar.cliente.initField("#empresa","#empresaid","juridica")};Gerenciar.estoque={};Gerenciar.estoque.init=function(){ajaxLink();$("#produto").focus();Gerenciar.fornecedor.initField("#fornecedor","#fornecedorid");Gerenciar.produto.initField("#produto","#produtoid",1);$("#tipo").change(function(){$(this).closest("form").submit()})};Gerenciar.estoque.initForm=function(a){$("#quantidade").autoNumeric("init");$("#precocompra").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.grupo={};Gerenciar.grupo.init=function(){ajaxLink();$("#query").focus()};Gerenciar.grupo.initForm=function(a){$("#quantidademinima").autoNumeric("init");$("#quantidademaxima").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.propriedade={};Gerenciar.propriedade.init=function(){ajaxLink();$("#query").focus()};Gerenciar.propriedade.initForm=function(a){Upload.image.initialize("#imagem_container");if(a!=undefined){$("#"+a).focus()}};Gerenciar.pacote={};Gerenciar.pacote.init=function(){ajaxLink();$("#query").focus()};Gerenciar.pacote.initForm=function(a){$("#quantidade").autoNumeric("init");$("#valor").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.dispositivo={};Gerenciar.dispositivo.init=function(){ajaxLink();$("#query").focus()};Gerenciar.dispositivo.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.impressora={};Gerenciar.impressora.init=function(){ajaxLink();$("#query").focus()};Gerenciar.impressora.initForm=function(a){$("#colunas").autoNumeric("init");$("#avanco").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.promocao={};Gerenciar.promocao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.promocao.initForm=function(a){$("#valor").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.funcionalidade={};Gerenciar.funcionalidade.init=function(){ajaxLink();$("#query").focus()};Gerenciar.funcionalidade.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.permissao={};Gerenciar.permissao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.permissao.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.acesso={};Gerenciar.acesso.init=function(){ajaxLink();$("#query").focus();$("input.js-switch").click(function(){var a=$(this);$.post("/gerenciar/acesso/?saida=json",{marcado:Util.checkVal(a),funcao:a.attr("data-funcao"),permissao:a.attr("data-permissao")},function(b){if(b.status!="ok"){alert(b.msg);return}var c=a.closest("tr");if(a.is(":checked")){c.removeClass("active")}else{c.addClass("active")}}).fail(function(){alert("Falha na conexão com o servidor")})})};Gerenciar.acesso.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.produto_fornecedor={};Gerenciar.produto_fornecedor.init=function(){ajaxLink();$("#query").focus()};Gerenciar.produto_fornecedor.initForm=function(a){$("#precocompra").autoNumeric("init");$("#precovenda").autoNumeric("init");$("#quantidademinima").autoNumeric("init");$("#estoque").autoNumeric("init");$.datetimepicker.setLocale("pt-BR");$("#dataconsulta").datetimepicker({format:"d/m/Y H:i",enterLikeTab:false});if(a!=undefined){$("#"+a).focus()}};Gerenciar.sistema={};Gerenciar.sistema.init=function(){ajaxLink();$("#query").focus()};Gerenciar.sistema.initForm=function(a){$("#computadores").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.sistema.initEmpresa=function(a){if(a!=undefined){$("#"+a).focus()}$("form").each(function(){$(this).find("input").keypress(function(b){if(b.which==10||b.which==13){$("#cliente-form").submit()}})});$("#cliente-form").on("clientesave",function(b,c){$(this).attr("data-cliente-id",c.item.id);$(this).attr("action",makeurl("/gerenciar/cliente/editar",{id:c.item.id}));$("#clienteid").val(c.item.id);$("#localizacao-form").submit()});$("#save-button").click(function(){$("#cliente-form").submit()})};Gerenciar.sistema.initAvancado=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.sistema.initLayout=function(a){Upload.image.initialize(".image-view");if(a!=undefined){$("#"+a).focus()}};Gerenciar.sistema.optionChecker=function(a){$("input.js-switch").click(function(){$.post(a,{marcado:Util.checkVal($(this)),secao:$(this).attr("data-section"),chave:$(this).attr("data-key")},function(b){if(b.status!="ok"){alert(b.msg)}}).fail(function(){alert("Falha na conexão com o servidor")})})};Gerenciar.sistema.printInit=function(){Gerenciar.sistema.optionChecker("/gerenciar/sistema/impressao")};Gerenciar.sistema.optionInit=function(){Gerenciar.sistema.optionChecker("/gerenciar/sistema/opcoes")};Gerenciar.sistema.initEmail=function(a){$("#porta").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}$("#destinatario, #usuario").blur(function(){if($("#servidor").val()!=""&&$(this).is("#destinatario")){return}var b=$(this).val().split("@");if(b.length!=2){return}var c=b[1];var d="smtp."+c;switch(c){case"hotmail.com":case"hotmail.com.br":case"outook.com":case"outook.com.br":d="smtp.live.com";break;case"gmail.com":d="smtp.gmail.com";break;case"yahoo.com":case"yahoo.com.br":d="smtp.mail.yahoo.com";break;case"bol.com":case"bol.com.br":d="smtps.bol.com.br";break}$("#servidor").val(d)});$("#encriptacao").change(function(){var b=25;switch($(this).val()){case"1":b=465;break;case"2":b=587;break}$("#porta").val(b)})};Gerenciar.informacao={};Gerenciar.informacao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.informacao.initForm=function(a){$("#porcao").autoNumeric("init");$("#dieta").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.resumo={};Gerenciar.resumo.init=function(){ajaxLink();$("#query").focus()};Gerenciar.resumo.initForm=function(a){$("#valor").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.formacao={};Gerenciar.formacao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.formacao.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.consumacao={};Gerenciar.consumacao.init=function(){ajaxLink();$("#query").focus();$("#modulo, #dia").change(function(){$(this).closest("form").submit()})};Gerenciar.consumacao.initForm=function(a){$("#valor").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.lista_compra={};Gerenciar.lista_compra.init=function(){ajaxLink();$("#query").focus()};Gerenciar.lista_compra.initForm=function(a){$.datetimepicker.setLocale("pt-BR");$("#datacompra").datetimepicker({format:"d/m/Y H:i",enterLikeTab:false});if(a!=undefined){$("#"+a).focus()}};Gerenciar.modulo={};Gerenciar.modulo.init=function(){ajaxLink();$("#query").focus();$("input.js-switch").click(function(){var a=$(this);$.post("/gerenciar/modulo/",{marcado:Util.checkVal(a),id:a.attr("data-id")},function(b){if(b.status!="ok"){alert(b.msg);return}var c=a.closest("tr");if(a.is(":checked")){c.removeClass("active")}else{c.addClass("active")}}).fail(function(){alert("Falha na conexão com o servidor")})})};Gerenciar.modulo.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.lista_produto={};Gerenciar.lista_produto.init=function(){ajaxLink();$("#query").focus()};Gerenciar.lista_produto.initForm=function(a){$("#quantidade").autoNumeric("init");$("#precomaximo").autoNumeric("init");$("#preco").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.endereco={};Gerenciar.endereco.init=function(){ajaxLink();$("#query").focus()};Gerenciar.endereco.initForm=function(a){$("#cep").each(function(){$(this).mask($(this).attr("mask"))});if(a!=undefined){$("#"+a).focus()}};Gerenciar.horario={};Gerenciar.horario.init=function(){ajaxLink();$("#query").focus()};Gerenciar.horario.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.valor_nutricional={};Gerenciar.valor_nutricional.init=function(){ajaxLink();$("#query").focus()};Gerenciar.valor_nutricional.initForm=function(a){$("#quantidade").autoNumeric("init");$("#valordiario").autoNumeric("init");if(a!=undefined){$("#"+a).focus()}};Gerenciar.transferencia={};Gerenciar.transferencia.init=function(){ajaxLink();$("#query").focus()};Gerenciar.transferencia.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.patrimonio={};Gerenciar.patrimonio.init=function(){ajaxLink();$("#query").focus();Gerenciar.cliente.initField("#empresa","#empresaid","juridica");Gerenciar.fornecedor.initField("#fornecedor","#fornecedorid");$("#estado").change(function(){$(this).closest("form").submit()})};Gerenciar.patrimonio.initForm=function(a){$("#quantidade").autoNumeric("init");$("#altura").autoNumeric("init");$("#largura").autoNumeric("init");$("#comprimento").autoNumeric("init");$("#custo").autoNumeric("init");$("#valor").autoNumeric("init");Upload.image.initialize("#imagemanexada_container");if(a!=undefined){$("#"+a).focus()}Gerenciar.cliente.initField("#empresa","#empresaid","juridica");Gerenciar.fornecedor.initField("#fornecedor","#fornecedorid")};Gerenciar.pagina={};Gerenciar.pagina.init=function(){ajaxLink();$("#query").focus();$("#nome, #linguagemid").change(function(){$(this).closest("form").submit()})};Gerenciar.pagina.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};Gerenciar.juncao={};Gerenciar.juncao.init=function(){ajaxLink();$("#query").focus()};Gerenciar.juncao.initForm=function(a){if(a!=undefined){$("#"+a).focus()}};