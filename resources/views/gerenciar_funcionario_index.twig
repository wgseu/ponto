{{ include('header_gerenciar.twig') }}
<script type="text/javascript">
  $(function () {
    Gerenciar.funcionario.init();
  });
</script>
<div class="row">
  <div class="page-title">
    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
      <h3>Funcionários</h3>
    </div>
    <form method="get" action="/gerenciar/funcionario/" id="search-form">
      <div class="form-group col-lg-2 col-md-5 col-sm-5 col-xs-6">
        <label for="funcao">Função:</label>
        <select class="form-control" id="funcao" name="funcao">
          <option value="" {{ !array_key_exists($this->get('funcao'), $funcoes) ? 'selected': '' }}>Todas</option>
          {% for $value, $text in $funcoes %}
            <option value="{{ $value }}" {{ $this->get('funcao') == $value ? 'selected': '' }}>{{ $text }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group col-lg-2 col-md-3 col-sm-3 col-xs-6">
        <label for="genero">Genero:</label>
        <select class="form-control" id="genero" name="genero">
          <option value="" {{ !array_key_exists($this->get('genero'), $generos) ? 'selected': '' }}>Todos</option>
          {% for $value, $text in $generos %}
            <option value="{{ $value }}" {{ $this->get('genero') == $value ? 'selected': '' }}>{{ $text }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group col-lg-2 col-md-2 col-sm-2 col-xs-6">
        <label for="estado">Estado:</label>
        <select class="form-control" id="estado" name="estado">
          <option value="" {{ !array_key_exists($this->get('estado'), $estados) ? 'selected': '' }}>Todos</option>
          {% for $value, $text in $estados %}
            <option value="{{ $value }}" {{ $this->get('estado') == $value ? 'selected': '' }}>{{ $text }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group col-lg-4 col-md-12 col-sm-12 col-xs-6">
        <label for="search">Busca:</label>
        <div class="input-group">
          <input type="text" class="form-control" id="search" name="search" placeholder="Nome, Telefone, E-mail ou {{ _p('Titulo', 'CPF') }}..." value="{{ $this->get('search') }}">
          <span class="input-group-btn">
            <button class="btn btn-default" type="submit">
              <i class="fa fa-search"></i>
            </button>
          </span>
        </div>
      </div>
    </form>
  </div>
  <div class="clearfix"></div>
  <div class="">
    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
        <div class="x_title">
          <h2>Funcionários<small></small>
          </h2>
          <ul class="nav navbar-right panel_toolbox hidden-print">
            <li>
              <a href="/gerenciar/funcionario/cadastrar" title="Novo funcionário">
                <i class="fa fa-plus-square"></i>
              </a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content x_scroll">
          <table class="table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Função</th>
                <th>Linguagem</th>
                <th class="text-center">Data de cadastro</th>
                <th width="10%" style="text-align: center;">Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for $prestador in $prestadores %}
                <tr class="{{ !$prestador->isAtivo() ? 'active': '' }}">
                  {% $_cliente = $prestador->findClienteID() %}
                  <td>
                    <a href="/gerenciar/cliente/editar?id={{ $_cliente->getID() }}" title="Editar cliente '{{ $_cliente->getNomeCompleto() }}'"><img src="{{ get_image_url($_cliente->getImagem(), 'cliente', 'cliente.png') }}" class="{{ $_cliente->getTipo() == \MZ\Account\Cliente::TIPO_FISICA?'rounded':'' }}" height="48" alt="Foto" title="Foto"/>
                      <strong>{{ $_cliente->getNomeCompleto() }}</strong>
                    </a>
                  </td>
                  {% $_funcao = $prestador->findFuncaoID() %}
                  <td>
                    <a href="/gerenciar/funcao/editar?id={{ $_funcao->getID() }}" title="Editar função '{{ $_funcao->getDescricao() }}'">{{ $_funcao->getDescricao() }}</a>
                  </td>
                  <td>{{ $prestador->getLinguagemName() }}</td>
                  <td class="text-center">
                    <strong title="Data de cadastro">{{ $this->datetime($prestador->getDataCadastro()) }}</strong>
                    <small title="Data de saída">{{ $this->datetime($prestador->getDataSaida()) }}</small>
                  </td>
                  <td class="text-center">
                    <ul class="nav panel_toolbox">
                      <li>
                        <a href="/gerenciar/funcionario/editar?id={{ $prestador->getID() }}" title="Editar funcionário '{{ $_cliente->getNomeCompleto() }}'">
                          <i class="fa fa-edit"></i>
                        </a>
                      </li>
                      <li>
                        <a href="/gerenciar/funcionario/excluir?id={{ $prestador->getID() }}" title="Excluir funcionário '{{ $_cliente->getNomeCompleto() }}'" class="ajaxlink" ask="Deseja excluir o funcionário '{{ $_cliente->getNomeCompleto() }}'?">
                          <i class="fa fa-close"></i>
                        </a>
                      </li>
                    </ul>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
          {{ include('pagination.twig') }}
        </div>
      </div>
    </div>
  </div>
</div>
{{ include('footer_gerenciar.twig') }}